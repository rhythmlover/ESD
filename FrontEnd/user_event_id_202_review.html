<!DOCTYPE HTML>
<!--
	Dopetrope by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="en">

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <!-- Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>

		function fetchReviews(eventId) {
            axios.get(`http://localhost:5005/reviews/${eventId}`)
                .then(response => {
                    const reviews = response.data.data;
                    if (reviews.length === 0) {
                        document.getElementById('reviewsContainer').innerHTML = "<p>No reviews available.</p>";
                        return;
                    }
					let reviewsHtml = '';
					for (let i = 0; i < reviews.length; i++) {
						const review = reviews[i];
						const adminCommentHtml = review.admin_comment ? `<p class="card-text">Admin Comment: ${review.admin_comment}</p>` : '';
						reviewsHtml += `
							<div class="card mb-3">
								<div class="card-body">
									<h5 class="card-title">User ID: ${review.user_id}</h5>
									<p class="card-text">Created At: ${review.created_at}</p>
									<p class="card-text">Rating: ${review.rating}</p>
									<p class="card-text">Comment: ${review.comment}</p>
									${adminCommentHtml}
								</div>
							</div>
						`;
					}
					document.getElementById('reviewsContainer').innerHTML = reviewsHtml;
					})
                .catch(error => {
                    console.error('Error fetching reviews:', error);
                    document.getElementById('reviewsContainer').innerHTML = "<p>Error fetching reviews.</p>";
                });
        }

        const eventId = "your_event_id";
        fetchReviews(202);
    </script>

	<head>
		<title>User Reviews - Event 202</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	
	<body class="left-sidebar is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<section id="header">

					<!-- Logo -->
						<h1><a href="event.html">TicketMaster</a></h1>

            <!-- Nav -->
            <nav id="nav">
                <ul>
                    <li class="current"><a href="event.html">Home</a></li>
                </ul>
            </nav>

				</section>

			<!-- Main -->
				<section id="main">
					<div class="container">
							<div class="col-8 col-12-medium imp-medium">
								<!-- Content -->
									<article class="box post">
										<a href="#" class="image featured"><img src="images/drake_club_event_102.jpg" alt="" /></a>
										<header>
											<h2>Reviews for Event 202 - Night at Marquee:</h2>
											<p>Over "XXX" Reviews</p>
										</header>
										<div id="reviewsContainer">
                                        </div>
										<a href="user_add_review.html" class="button">Create Review</a>
									</article>

							</div>
						</div>
				</section>

			<!-- Footer -->
				<section id="footer">
					<div class="container">
						<div class="row">
							<div class="col-4 col-12-medium">
								<section>
									<header>
										<h2>TicketMaster</h2>
									</header>
									<ul class="social">
										<li><a class="icon brands fa-facebook-f" href="#"><span class="label">Facebook</span></a></li>
										<li><a class="icon brands fa-twitter" href="#"><span class="label">Twitter</span></a></li>
										<li><a class="icon brands fa-dribbble" href="#"><span class="label">Dribbble</span></a></li>
										<li><a class="icon brands fa-tumblr" href="#"><span class="label">Tumblr</span></a></li>
										<li><a class="icon brands fa-linkedin-in" href="#"><span class="label">LinkedIn</span></a></li>
									</ul>
									</section>
									</div>
									<section>
											<h3>Address</h3>
											<p>
												Untitled Incorporated<br />
												1234 Somewhere Road Suite<br />
												Nashville, TN 00000-0000
											</p>
									</section>
									<section>
											<h3>Mail</h3>
											<p><a href="#">someone@untitled.tld</a></p>
									</section>
									<section>
											<h3>Phone</h3>
											<p>(800) 000-0000</p>
								</section>
							</div>
							<div class="col-12">

								<!-- Copyright -->
									<div id="copyright">
										<ul class="links">
											<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
										</ul>
									</div>

							</div>
					</div>
				</section>

		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>